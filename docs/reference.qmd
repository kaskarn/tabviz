---
title: "Function Reference"
---

Complete reference for all webforest functions organized by category.

## Creating Plots

### forest_plot()

The main function for creating interactive forest plots.

```r
forest_plot(
  x,                      # Data frame or WebSpec object
  point = NULL,           # Column name for point estimates
  lower = NULL,           # Column name for lower CI bounds
  upper = NULL,           # Column name for upper CI bounds
  label = NULL,           # Column name for row labels
  group = NULL,           # Column name(s) for hierarchical grouping
  columns = NULL,         # List of column specifications
  scale = "linear",       # "linear" or "log"
  null_value = NULL,      # Reference value (e.g., 1 for ratios, 0 for diffs)
  axis_label = NULL,      # X-axis label
  theme = web_theme_default(),

  # Row styling columns
  row_type = NULL,        # Column for row type: "header", "data", "summary", "spacer"
  row_bold = NULL,        # Column for bold styling (logical)
  row_indent = NULL,      # Column for indentation level (integer)
  row_color = NULL,       # Column for text color (hex string)
  row_badge = NULL,       # Column for badge text

  # Cell styling columns
  style_cols = NULL,      # Column names to style
  style_bold = NULL,      # Column for cell bold (logical)
  style_color = NULL,     # Column for cell color (hex string)
  style_bg = NULL,        # Column for cell background (hex string)

  # Axis overrides
  axis_range = NULL,      # c(min, max) to override axis limits
  axis_ticks = NULL,      # Numeric vector of tick positions
  axis_gridlines = NULL,  # TRUE/FALSE to show gridlines

  # Widget options
  width = NULL,           # Widget width
  height = NULL           # Widget height
)
```

### webtable()

Create a table-only widget without the forest plot visualization.

```r
webtable(
  x,                      # Data frame or WebSpec
  columns = NULL,         # List of column specifications
  theme = web_theme_default(),
  width = NULL,
  height = NULL
)
```

### save_plot()

Export a forest plot to static file formats.

```r
save_plot(
  plot,                   # forest_plot or webtable widget

file,                   # Output file path (.svg, .pdf, or .png)
  width = 800,            # Width in pixels
  height = NULL,          # Height in pixels (auto if NULL)
  scale = 2               # Scale factor for PNG resolution
)
```

## Theme Functions

### Preset Themes

| Function | Description |
|----------|-------------|
| `web_theme_default()` | Clean, modern default theme |
| `web_theme_jama()` | JAMA journal style (B&W, compact, sans-serif) |
| `web_theme_lancet()` | Lancet journal style (navy blue, serif fonts) |
| `web_theme_modern()` | Contemporary UI with subtle colors |
| `web_theme_presentation()` | Large fonts optimized for slides |
| `web_theme_dark()` | Dark mode with light text |
| `web_theme_minimal()` | Minimal black & white styling |

### Theme Modifiers

All modifiers return the modified theme and can be chained with pipes:

```r
web_theme_jama() |>
  set_colors(primary = "#0066cc") |>
  set_typography(font_family = "Georgia") |>
  set_spacing(row_height = 28) |>
  set_shapes(point_size = 6) |>
  set_axis(gridlines = TRUE) |>
  set_layout(row_border = TRUE)
```

#### set_colors()

```r
set_colors(
  theme,
  background = NULL,        # Background color
  foreground = NULL,        # Primary text color
  primary = NULL,           # Primary accent color
  secondary = NULL,         # Secondary text color
  accent = NULL,            # Accent color
  muted = NULL,             # Muted text color
  border = NULL,            # Border color
  interval_positive = NULL, # Color for favorable effects
  interval_negative = NULL, # Color for unfavorable effects
  interval_neutral = NULL,  # Color for neutral effects
  interval_line = NULL,     # Interval line color
  summary_fill = NULL,      # Summary diamond fill
  summary_border = NULL     # Summary diamond border
)
```

#### set_typography()

```r
set_typography(
  theme,
  font_family = NULL,       # CSS font-family string
  font_size_sm = NULL,      # Small text (e.g., "0.75rem")
  font_size_base = NULL,    # Base text (e.g., "0.875rem")
  font_size_lg = NULL,      # Large text (e.g., "1rem")
  font_weight_normal = NULL, # Normal weight (e.g., 400)
  font_weight_medium = NULL, # Medium weight (e.g., 500)
  font_weight_bold = NULL,   # Bold weight (e.g., 600 or 700)
  line_height = NULL        # Line height multiplier
)
```

#### set_spacing()

```r
set_spacing(
  theme,
  row_height = NULL,        # Data row height in pixels
  header_height = NULL,     # Header row height in pixels
  column_gap = NULL,        # Gap between columns
  section_gap = NULL,       # Gap between sections
  padding = NULL,           # Container padding
  cell_padding_x = NULL,    # Horizontal cell padding
  cell_padding_y = NULL     # Vertical cell padding
)
```

#### set_shapes()

```r
set_shapes(
  theme,
  point_size = NULL,        # Point marker radius
  summary_height = NULL,    # Summary diamond height
  line_width = NULL,        # Interval line width
  border_radius = NULL      # Border radius for containers
)
```

#### set_axis()

```r
set_axis(
  theme,
  range_min = NULL,         # Minimum axis value (NULL = auto)
  range_max = NULL,         # Maximum axis value (NULL = auto)
  tick_count = NULL,        # Target number of ticks
  tick_values = NULL,       # Explicit tick positions (numeric vector)
  gridlines = NULL,         # Show gridlines (TRUE/FALSE)
  gridline_style = NULL     # "solid", "dashed", or "dotted"
)
```

#### set_layout()

```r
set_layout(
  theme,
  plot_position = NULL,     # "left" or "right"
  table_width = NULL,       # Table width ("auto" or pixels)
  plot_width = NULL,        # Plot width ("auto" or pixels)
  row_border = NULL,        # Show row borders (TRUE/FALSE)
  row_border_style = NULL,  # "solid", "dashed", "dotted"
  container_border = NULL,  # Show container border (TRUE/FALSE)
  container_border_radius = NULL  # Container border radius
)
```

## Column Functions

### Basic Columns

```r
# Text column
col_text(field, header = NULL, width = NULL, position = "left")

# Numeric column with formatting
col_numeric(field, header = NULL, width = NULL, position = "left")

# Confidence interval display (point estimate with CI)
col_interval(header = "95% CI", width = 140, position = "right")
```

### Visualization Columns

```r
# Horizontal bar chart
col_bar(
  field,
  header = NULL,
  width = NULL,
  max_value = NULL,         # Maximum value for scaling (auto if NULL)
  show_label = TRUE,        # Show value label
  color = NULL              # Bar color
)

# P-value with optional significance stars
col_pvalue(
  field,
  header = "P-value",
  width = 80,
  stars = TRUE              # Show *, **, *** for significance
)

# Inline sparkline chart
col_sparkline(
  field,                    # Field containing numeric vector
  header = NULL,
  width = 80,
  type = "line"             # "line", "bar", or "area"
)

# Sample size column (alias for col_numeric with "N" default)
col_n(field = "n", header = "N", width = 60)

# Weight column with bar visualization
col_weight(field = "weight", header = "Weight", width = 100)
```

### Column Groups

```r
# Group multiple columns under a shared header
col_group(
  header,                   # Group header text
  ...                       # Column specifications
)

# Example:
col_group("Treatment Effect",
  col_numeric("hr", "HR"),
  col_interval("95% CI")
)
```

## Annotations

### Reference Lines

```r
forest_refline(
  x,                        # X-axis position
  label = NULL,             # Optional label text
  style = "dashed",         # "solid", "dashed", or "dotted"
  color = NULL              # Line color (uses theme if NULL)
)
```

### Custom Annotations

```r
forest_annotation(
  type,                     # Annotation type
  ...                       # Type-specific parameters
)
```

## Multiple Effects

Display multiple effect estimates per row (e.g., sensitivity analyses):

```r
# Define effect specifications
effects <- list(
  web_effect("primary", point = "hr", lower = "lo", upper = "hi",
             label = "Primary", color = "#2563eb"),
  web_effect("sensitivity", point = "hr_sens", lower = "lo_sens", upper = "hi_sens",
             label = "Sensitivity", color = "#dc2626")
)

forest_plot(data, ..., effects = effects)
```

## Shiny Integration

### Output and Render

```r
# In UI
forestOutput("plot", width = "100%", height = "400px")

# In server
output$plot <- renderForest({
  forest_plot(data, ...)
})
```

### Proxy Functions

Update plots without full re-render:

```r
# Create proxy
proxy <- forestProxy("plot")

# Update data
forest_update_data(proxy, new_data)

# Sort by column
forest_sort(proxy, column = "hr", direction = "asc")

# Filter rows
forest_filter(proxy, field = "n", operator = "gt", value = 100)

# Clear filters
forest_clear_filter(proxy)

# Toggle group collapse
forest_toggle_subgroup(proxy, group_id = "group1", collapsed = TRUE)
```

## Specification Objects

### WebSpec

Create a complete plot specification programmatically:

```r
web_spec(
  data,                     # Data frame
  columns = list(),         # Column specifications
  theme = web_theme_default(),
  interaction = web_interaction(),
  annotations = list(),
  labels = list(
    title = NULL,
    subtitle = NULL,
    caption = NULL,
    footnote = NULL
  )
)
```

### Interaction Settings

```r
# Full interactivity (default)
web_interaction(
  show_filters = FALSE,
  show_legend = TRUE,
  enable_sort = TRUE,
  enable_collapse = TRUE,
  enable_select = TRUE,
  enable_hover = TRUE,
  enable_resize = TRUE,
  enable_export = TRUE
)

# Minimal interactivity
web_interaction_minimal()

# Publication mode (export-focused)
web_interaction_publication()
```

## Utility Functions

### Example Generation

```r
# Regenerate all package examples
regenerate_examples()

# Screenshot HTML widgets
screenshot_html(html_file, output_file, width = 1200, scale = 2)
screenshot_all_examples(output_dir = "examples_output")
```
