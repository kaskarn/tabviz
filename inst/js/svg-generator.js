(function(){"use strict";function ht(t,r){if(r){const c=[.05,.1,.15,.2,.25,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.2,1.3,1.4,1.5,1.75,2,2.5,3,4,5,6,7,8,10,12,15,20,25,30,40,50,75,100];let h=c[0];for(const s of c)if(s<=t[0])h=s;else break;let a=c[c.length-1];for(let s=c.length-1;s>=0&&c[s]>=t[1];s--)a=c[s];return[h,a]}const n=t[1]-t[0];if(n===0)return t;const o=Math.pow(10,Math.floor(Math.log10(n))),i=n/o;let e;i<=1?e=o*.1:i<=2?e=o*.2:i<=5?e=o*.5:e=o;const f=Math.floor(t[0]/e)*e,l=Math.ceil(t[1]/e)*e;return[f,l]}const tt=.15,ut=.06,dt=.05,ot=.04;function pt(t){return t<=0?0:ot+t*ot}const I={DEFAULT_LABEL_WIDTH:200,DEFAULT_COLUMN_WIDTH:100,AXIS_HEIGHT:32,AXIS_LABEL_HEIGHT:20,BOTTOM_MARGIN:16,MIN_FOREST_WIDTH:200,DEFAULT_WIDTH:800,COLUMN_GAP:16},G={TITLE_HEIGHT:28,SUBTITLE_HEIGHT:20,CAPTION_HEIGHT:16,FOOTNOTE_HEIGHT:14,DEFAULT_FONT_SIZE:14,REM_BASE:16,TEXT_BASELINE_ADJUSTMENT:1/3},w={INDENT_PER_LEVEL:12,TEXT_PADDING:10,WHISKER_HALF_HEIGHT:4,DEFAULT_TICK_COUNT:5},nt={GROUP_HEADER_HEIGHT_MULTIPLIER:1.5,OVERALL_ROW_HEIGHT_MULTIPLIER:1.5};function gt(t,r){var W,P,B,Y;const n=t.theme,o=n.spacing.rowHeight,i=n.spacing.padding,e=Array.isArray(t.columns)?t.columns:[],f=j(e,"left"),l=j(e,"right"),h=K(f)||K(l)?n.spacing.headerHeight*nt.GROUP_HEADER_HEIGHT_MULTIPLIER:n.spacing.headerHeight,a=!!((W=t.labels)!=null&&W.title),s=!!((P=t.labels)!=null&&P.subtitle),p=!!((B=t.labels)!=null&&B.caption),g=!!((Y=t.labels)!=null&&Y.footnote),u=a?G.TITLE_HEIGHT:0,N=s?G.SUBTITLE_HEIGHT:0,$=u+N+(a||s?i:0),_=p?G.CAPTION_HEIGHT:0,x=g?G.FOOTNOTE_HEIGHT:0,d=_+x+(p||g?i:0),E=et(t).length,y=!!t.data.overall,b=E*o+(y?o*nt.OVERALL_ROW_HEIGHT_MULTIPLIER:0),A=V(e,"left"),H=V(e,"right"),L=I.DEFAULT_LABEL_WIDTH+A.reduce((C,k)=>C+(typeof k.width=="number"?k.width:I.DEFAULT_COLUMN_WIDTH),0),m=H.reduce((C,k)=>C+(typeof k.width=="number"?k.width:I.DEFAULT_COLUMN_WIDTH),0),M=r.width??I.DEFAULT_WIDTH,U=t.data.includeForest,R=L+m;let O;if(!U)O=0;else if(typeof t.layout.plotWidth=="number")O=t.layout.plotWidth;else{const C=M-R-I.COLUMN_GAP*2-i*2;O=Math.max(C,I.MIN_FOREST_WIDTH)}const S=i*2+R+O+I.COLUMN_GAP*2,F=Math.max(r.width??M,S),X=$+i+h+b+I.AXIS_HEIGHT+I.AXIS_LABEL_HEIGHT+d+I.BOTTOM_MARGIN;return{totalWidth:F,totalHeight:r.height??X,tableWidth:L+m,forestWidth:O,headerHeight:h,rowHeight:o,plotHeight:b,axisHeight:I.AXIS_HEIGHT,nullValue:t.data.nullValue,summaryYPosition:b-o,showOverallSummary:y,headerTextHeight:$,footerTextHeight:d,titleY:i+G.TITLE_HEIGHT-8,subtitleY:i+u+G.SUBTITLE_HEIGHT-4,mainY:$+i,footerY:$+i+h+b+I.AXIS_HEIGHT+I.AXIS_LABEL_HEIGHT+i}}function et(t){var a;const r=t.data.rows,n=Array.isArray(t.data.groups)?t.data.groups:[];if(n.length===0)return r.map(s=>({type:"data",row:s,depth:0}));const o=new Map;for(const s of n)o.set(s.id,s);const i=new Map;for(const s of r){const p=s.groupId??null;i.has(p)||i.set(p,[]),i.get(p).push(s)}const e=new Set;for(const s of i.keys()){if(!s)continue;let p=s;for(;p;)e.add(p),p=(a=o.get(p))==null?void 0:a.parentId}function f(s){return n.filter(p=>(p.parentId??null)===s&&e.has(p.id))}function l(s){if(!s)return 0;const p=o.get(s);return p?p.depth+1:0}const c=[];function h(s){var g;if(s){const u=o.get(s);if(!u)return;const N=((g=i.get(s))==null?void 0:g.length)??0;c.push({type:"group_header",groupId:u.id,label:u.label,depth:u.depth,rowCount:N})}for(const u of f(s))h(u.id);const p=i.get(s)??[];for(const u of p)c.push({type:"data",row:u,depth:l(u.groupId)})}return h(null),c}function rt(t){const r=[];for(const n of t)n.isGroup?r.push(...rt(n.columns)):r.push(n);return r}function V(t,r){const n=[];for(const o of t)o.position===r&&(o.isGroup?n.push(...rt(o.columns)):n.push(o));return n}function j(t,r){return t.filter(n=>n.position===r)}function K(t){return t.some(r=>r.isGroup)}function it(t,r){return t.isGroup?t.columns.reduce((n,o)=>n+it(o,r),0):typeof t.width=="number"?t.width:r}function v(t){return t.endsWith("rem")?parseFloat(t)*G.REM_BASE:t.endsWith("px")?parseFloat(t):G.DEFAULT_FONT_SIZE}function J(t,r,n){return n==="right"?{textX:t+r-w.TEXT_PADDING,anchor:"end"}:n==="center"?{textX:t+r/2,anchor:"middle"}:{textX:t+w.TEXT_PADDING,anchor:"start"}}function D(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function q(t,r,n,o=0){const i=n*.55,e=r-o*2,f=Math.floor(e/i);return t.length<=f?t:t.slice(0,f-1)+"â€¦"}function Z(t){return t==null||Number.isNaN(t)?"":Number.isInteger(t)||Math.abs(t-Math.round(t))<1e-4?Math.round(t).toString():t.toFixed(2)}function yt(t,r,n){return t==null||Number.isNaN(t)?"":r==null||n===void 0||n===null||Number.isNaN(r)||Number.isNaN(n)?Z(t):`${t.toFixed(2)} (${r.toFixed(2)}, ${n.toFixed(2)})`}function $t(t){return Math.abs(t)<.01?"0":Math.abs(t)>=100?t.toFixed(0):Math.abs(t)>=10?t.toFixed(1):t.toFixed(2)}function xt(t,r){const[n,o]=t,[i,e]=r,f=(e-i)/(o-n),l=c=>i+(c-n)*f;return l.domain=()=>t,l.range=()=>r,l.ticks=c=>{const h=(o-n)/(c-1),a=[];for(let s=0;s<c;s++)a.push(n+h*s);return a},l}function Tt(t,r){const[n,o]=t.map(a=>Math.max(a,.001)),[i,e]=r,f=Math.log10(n),l=Math.log10(o),c=(e-i)/(l-f),h=a=>{const s=Math.log10(Math.max(a,.001));return i+(s-f)*c};return h.domain=()=>[n,o],h.range=()=>r,h.ticks=a=>{const s=[],p=Math.floor(Math.log10(n)),g=Math.ceil(Math.log10(o));for(let u=p;u<=g;u++){const N=Math.pow(10,u);for(const $ of[1,2,5]){const _=N*$;_>=n&&_<=o&&s.push(_)}}return s.length>0?s:[n,o]},h}function mt(t,r){const n=t.data.rows,o=t.theme.axis,i=t.data.scale==="log",e=typeof(o==null?void 0:o.rangeMin)=="number",f=typeof(o==null?void 0:o.rangeMax)=="number";let l;if(e&&f)l=[o.rangeMin,o.rangeMax];else{const h=n.flatMap(a=>[a.lower,a.upper]).filter(a=>a!=null&&!Number.isNaN(a)&&Number.isFinite(a));if(h.length===0)l=i?[.1,10]:[0,1];else{const[a,s]=[Math.min(...h),Math.max(...h)],p=s-a||1;l=[e?o.rangeMin:a-p*tt,f?o.rangeMax:s+p*tt]}}const c=ht(l,i);return i?Tt([Math.max(c[0],.01),Math.max(c[1],.02)],[0,r]):xt(c,[0,r])}function Et(t,r,n){var e,f;const o=[],i=n.spacing.padding;if((e=t.labels)!=null&&e.title){const l=v(n.typography.fontSizeLg);o.push(`<text x="${i}" y="${r.titleY}"
      font-family="${n.typography.fontFamily}"
      font-size="${l}px"
      font-weight="${n.typography.fontWeightBold}"
      fill="${n.colors.foreground}">${D(t.labels.title)}</text>`)}if((f=t.labels)!=null&&f.subtitle){const l=v(n.typography.fontSizeBase);o.push(`<text x="${i}" y="${r.subtitleY}"
      font-family="${n.typography.fontFamily}"
      font-size="${l}px"
      fill="${n.colors.secondary}">${D(t.labels.subtitle)}</text>`)}return o.join(`
`)}function _t(t,r,n){var f,l;const o=[],i=n.spacing.padding;let e=r.footerY;if((f=t.labels)!=null&&f.caption){const c=v(n.typography.fontSizeSm);o.push(`<text x="${i}" y="${e}"
      font-family="${n.typography.fontFamily}"
      font-size="${c}px"
      fill="${n.colors.secondary}">${D(t.labels.caption)}</text>`),e+=G.CAPTION_HEIGHT}if((l=t.labels)!=null&&l.footnote){const c=v(n.typography.fontSizeSm);o.push(`<text x="${i}" y="${e}"
      font-family="${n.typography.fontFamily}"
      font-size="${c}px"
      font-style="italic"
      fill="${n.colors.muted}">${D(t.labels.footnote)}</text>`)}return o.join(`
`)}function st(t,r,n,o,i,e,f,l){const c=[],h=v(e.typography.fontSizeSm),a=e.typography.fontWeightMedium,s=e.typography.fontWeightBold,p=K(t),g=I.DEFAULT_COLUMN_WIDTH,u=l??I.DEFAULT_LABEL_WIDTH,N=($,_)=>$+_/2+h*G.TEXT_BASELINE_ADJUSTMENT;if(p){const $=i/2,_=i/2;let x=n;f&&(c.push(`<text x="${x+w.TEXT_PADDING}" y="${N(o,i)}"
        font-family="${e.typography.fontFamily}"
        font-size="${h}px"
        font-weight="${a}"
        fill="${e.colors.foreground}">${D(f)}</text>`),c.push(`<line x1="${x+u}" x2="${x+u}"
        y1="${o}" y2="${o+i}"
        stroke="${e.colors.border}" stroke-width="1" opacity="0.3"/>`),x+=u);for(const d of t)if(d.isGroup){const T=it(d,g),E=x+T/2;c.push(`<text x="${E}" y="${N(o,$)}"
          font-family="${e.typography.fontFamily}"
          font-size="${h}px"
          font-weight="${s}"
          text-anchor="middle"
          fill="${e.colors.foreground}">${D(d.header)}</text>`),c.push(`<line x1="${x}" x2="${x+T}"
          y1="${o+$}" y2="${o+$}"
          stroke="${e.colors.border}" stroke-width="1" opacity="0.5"/>`),x+=T}else{const T=typeof d.width=="number"?d.width:g,E=d.headerAlign??d.align,{textX:y,anchor:b}=J(x,T,E),A=q(d.header,T,h,w.TEXT_PADDING);c.push(`<text x="${y}" y="${N(o,i)}"
          font-family="${e.typography.fontFamily}"
          font-size="${h}px"
          font-weight="${a}"
          text-anchor="${b}"
          fill="${e.colors.foreground}">${D(A)}</text>`),x+=T}x=n+(f?u:0);for(const d of t)if(d.isGroup){for(const T of d.columns)if(!T.isGroup){const E=typeof T.width=="number"?T.width:g,y=T.headerAlign??T.align,{textX:b,anchor:A}=J(x,E,y);c.push(`<text x="${b}" y="${N(o+$,_)}"
              font-family="${e.typography.fontFamily}"
              font-size="${h}px"
              font-weight="${a}"
              text-anchor="${A}"
              fill="${e.colors.foreground}">${D(T.header)}</text>`),x+=E}}else{const T=typeof d.width=="number"?d.width:g;x+=T}}else{let $=n;f&&(c.push(`<text x="${$+w.TEXT_PADDING}" y="${N(o,i)}"
        font-family="${e.typography.fontFamily}"
        font-size="${h}px"
        font-weight="${a}"
        fill="${e.colors.foreground}">${D(f)}</text>`),$+=u);for(const _ of r){const x=typeof _.width=="number"?_.width:g,d=_.headerAlign??_.align,{textX:T,anchor:E}=J($,x,d),y=q(_.header,x,h,w.TEXT_PADDING);c.push(`<text x="${T}" y="${N(o,i)}"
        font-family="${e.typography.fontFamily}"
        font-size="${h}px"
        font-weight="${a}"
        text-anchor="${E}"
        fill="${e.colors.foreground}">${D(y)}</text>`),$+=x}}return c.join(`
`)}function bt(t,r,n,o,i,e,f){const l=[],c=v(f.typography.fontSizeBase),h=o+i/2+c*G.TEXT_BASELINE_ADJUSTMENT,a=r*w.INDENT_PER_LEVEL;return l.push(`<rect x="${n}" y="${o}"
    width="${e}" height="${i}"
    fill="${f.colors.primary}" opacity="${dt}"/>`),l.push(`<text x="${n+w.TEXT_PADDING+a}" y="${h}"
    font-family="${f.typography.fontFamily}"
    font-size="${c}px"
    font-weight="${f.typography.fontWeightBold}"
    fill="${f.colors.foreground}">${D(t)}</text>`),l.join(`
`)}function at(t,r){const n=new Map;for(const o of r)if(o.type==="bar"){let i=0;for(const e of t){const f=e.metadata[o.field];typeof f=="number"&&f>i&&(i=f)}n.set(o.field,i>0?i:1)}return n}function lt(t,r,n,o,i,e,f,l=I.DEFAULT_LABEL_WIDTH,c=0,h){var u,N,$,_,x,d,T,E,y,b,A,H,L;const a=[],s=v(e.typography.fontSizeBase),p=o+i/2+s*G.TEXT_BASELINE_ADJUSTMENT;let g=n;if(f){const m=c*w.INDENT_PER_LEVEL+(((u=t.style)==null?void 0:u.indent)??0)*w.INDENT_PER_LEVEL,M=(N=t.style)!=null&&N.bold?e.typography.fontWeightBold:e.typography.fontWeightNormal,U=($=t.style)!=null&&$.italic?"italic":"normal",R=l-m-w.TEXT_PADDING*2,O=q(t.label,R,s,0);if(a.push(`<text x="${g+w.TEXT_PADDING+m}" y="${p}"
      font-family="${e.typography.fontFamily}"
      font-size="${s}px"
      font-weight="${M}"
      font-style="${U}"
      fill="${((_=t.style)==null?void 0:_.color)??e.colors.foreground}">${D(O)}</text>`),(x=t.style)!=null&&x.badge){const S=String(t.style.badge),F=s*.8,X=4,W=F+X*2,P=t.label.length*s*.55,B=g+w.TEXT_PADDING+m+P+6,C=S.length*F*.6+X*2,k=o+(i-W)/2;a.push(`<rect x="${B}" y="${k}" width="${C}" height="${W}"
        rx="3" fill="${e.colors.primary}" opacity="0.15"/>`),a.push(`<text x="${B+C/2}" y="${k+W/2+F*.35}"
        text-anchor="middle"
        font-family="${e.typography.fontFamily}"
        font-size="${F}px"
        font-weight="500"
        fill="${e.colors.primary}">${D(S)}</text>`)}g+=l}for(const m of r){const M=typeof m.width=="number"?m.width:I.DEFAULT_COLUMN_WIDTH,U=Ht(t,m),{textX:R,anchor:O}=J(g,M,m.align);if(m.type==="bar"&&typeof t.metadata[m.field]=="number"){const S=t.metadata[m.field],F=h==null?void 0:h.get(m.field),X=((T=(d=m.options)==null?void 0:d.bar)==null?void 0:T.maxValue)??F??100,W=((y=(E=m.options)==null?void 0:E.bar)==null?void 0:y.color)??e.colors.primary,P=e.shapes.pointSize*2,Y=M-w.TEXT_PADDING*2-50,C=Math.min(S/X*Y,Y);a.push(`<rect x="${g+w.TEXT_PADDING}" y="${o+i/2-P/2}"
        width="${Math.max(0,C)}" height="${P}"
        fill="${W}" opacity="0.7" rx="2"/>`);const k=g+M-w.TEXT_PADDING;a.push(`<text x="${k}" y="${p}"
        font-family="${e.typography.fontFamily}"
        font-size="${s}px"
        text-anchor="end"
        fill="${e.colors.foreground}">${Z(S)}</text>`)}else if(m.type==="sparkline"&&Array.isArray(t.metadata[m.field])){let S=t.metadata[m.field];Array.isArray(S[0])&&(S=S[0]);const F=((A=(b=m.options)==null?void 0:b.sparkline)==null?void 0:A.height)??16,X=((L=(H=m.options)==null?void 0:H.sparkline)==null?void 0:L.color)??e.colors.primary,W=w.TEXT_PADDING*2,P=It(S,g+w.TEXT_PADDING,o+i/2-F/2,M-W,F);a.push(`<path d="${P}" fill="none" stroke="${X}" stroke-width="1.5"/>`)}else a.push(`<text x="${R}" y="${p}"
        font-family="${e.typography.fontFamily}"
        font-size="${s}px"
        text-anchor="${O}"
        fill="${e.colors.foreground}">${D(U)}</text>`);g+=M}return a.join(`
`)}function Ht(t,r){var o,i,e,f;if(r.type==="interval")return yt(t.point,t.lower,t.upper);if(r.type==="numeric"){const l=t.metadata[r.field];return typeof l=="number"?Z(l):""}if(r.type==="pvalue"){const l=t.metadata[r.field];if(typeof l!="number")return"";const c=(i=(o=r.options)==null?void 0:o.pvalue)==null?void 0:i.stars,h=((f=(e=r.options)==null?void 0:e.pvalue)==null?void 0:f.thresholds)??[.05,.01,.001];let a="";return c&&(l<h[2]?a="***":l<h[1]?a="**":l<h[0]&&(a="*")),l<.001?`<0.001${a}`:`${l.toFixed(3)}${a}`}const n=t.metadata[r.field];return n!=null?String(n):""}function It(t,r,n,o,i){if(t.length===0)return"";const e=Math.min(...t),l=Math.max(...t)-e||1;return`M${t.map((h,a)=>{const s=r+a/(t.length-1)*o,p=n+i-(h-e)/l*i;return`${s.toFixed(1)},${p.toFixed(1)}`}).join("L")}`}const ct=6;function Q(t,r,n){const o=t.metadata[r];return o!=null&&typeof o=="number"&&!Number.isNaN(o)?o:n}function At(t,r){return r<=1?0:-((r-1)*ct)/2+t*ct}function wt(t,r,n,o,i,e=[]){var x;let f;e.length===0?f=[{point:t.point,lower:t.lower,upper:t.upper,color:null}]:f=e.map(d=>({point:Q(t,d.pointCol,t.point),lower:Q(t,d.lowerCol,t.lower),upper:Q(t,d.upperCol,t.upper),color:d.color??null}));const l=f.filter(d=>d.point!=null&&!Number.isNaN(d.point)&&d.lower!=null&&!Number.isNaN(d.lower)&&d.upper!=null&&!Number.isNaN(d.upper));if(l.length===0)return"";const c=o.shapes.pointSize,h=t.metadata.weight;let a=c;if(h){const d=.5+Math.sqrt(h/100)*1.5;a=Math.min(Math.max(c*d,3),c*2.5)}const s=o.shapes.lineWidth,p=o.colors.intervalLine,g=w.WHISKER_HALF_HEIGHT,u=((x=t.style)==null?void 0:x.type)==="summary",$=o.shapes.summaryHeight/2,_=[];return l.forEach((d,T)=>{const E=r+At(T,l.length),y=n(d.lower),b=n(d.upper),A=n(d.point),H=d.color??p,L=d.color??(d.point>i?o.colors.intervalPositive:d.point<i?o.colors.intervalNegative:o.colors.muted);if(u){const m=[`${y},${E}`,`${A},${E-$}`,`${b},${E}`,`${A},${E+$}`].join(" ");_.push(`
        <g class="interval effect-${T} summary">
          <polygon points="${m}"
            fill="${o.colors.summaryFill}" stroke="${o.colors.summaryBorder}" stroke-width="1"/>
        </g>`)}else _.push(`
        <g class="interval effect-${T}">
          <!-- CI line -->
          <line x1="${y}" x2="${b}" y1="${E}" y2="${E}"
            stroke="${H}" stroke-width="${s}"/>
          <!-- Whiskers -->
          <line x1="${y}" x2="${y}" y1="${E-g}" y2="${E+g}"
            stroke="${H}" stroke-width="${s}"/>
          <line x1="${b}" x2="${b}" y1="${E-g}" y2="${E+g}"
            stroke="${H}" stroke-width="${s}"/>
          <!-- Point -->
          <rect x="${A-a}" y="${E-a}"
            width="${a*2}" height="${a*2}" fill="${L}"/>
        </g>`)}),_.join("")}function Nt(t,r,n,o,i,e,f,l){const h=l.shapes.summaryHeight/2,a=i(r),s=i(t),p=i(n),g=e+Math.max(0,Math.min(f,a)),u=e+Math.max(0,Math.min(f,s)),N=e+Math.max(0,Math.min(f,p));return`<polygon points="${[`${g},${o}`,`${u},${o-h}`,`${N},${o}`,`${u},${o+h}`].join(" ")}"
    fill="${l.colors.summaryFill}"
    stroke="${l.colors.summaryBorder}"
    stroke-width="1"/>`}function Dt(t,r,n,o,i){const e=[],f=typeof n.axis.tickCount=="number"?n.axis.tickCount:w.DEFAULT_TICK_COUNT,l=Array.isArray(n.axis.tickValues)?n.axis.tickValues:t.ticks(f),c=v(n.typography.fontSizeSm);e.push(`<line x1="${i}" x2="${i+r.forestWidth}"
    y1="0" y2="0" stroke="${n.colors.border}" stroke-width="1"/>`);for(const h of l){const a=i+t(h);e.push(`<line x1="${a}" x2="${a}" y1="0" y2="4"
      stroke="${n.colors.border}" stroke-width="1"/>`),e.push(`<text x="${a}" y="16" text-anchor="middle"
      font-family="${n.typography.fontFamily}"
      font-size="${c}px"
      fill="${n.colors.secondary}">${$t(h)}</text>`)}return o&&e.push(`<text x="${i+r.forestWidth/2}" y="28"
      text-anchor="middle"
      font-family="${n.typography.fontFamily}"
      font-size="${c}px"
      font-weight="500"
      fill="${n.colors.secondary}">${D(o)}</text>`),`<g transform="translate(0, ${r.mainY+r.headerHeight+r.plotHeight})">${e.join(`
`)}</g>`}function ft(t,r,n,o,i,e){let l=`<line x1="${t}" x2="${t}" y1="${r}" y2="${n}"
    stroke="${i}" stroke-width="1" stroke-dasharray="${o==="dashed"?"6,4":o==="dotted"?"2,2":"none"}"/>`;return e&&(l+=`<text x="${t}" y="${r-4}" text-anchor="middle"
      font-size="10px" fill="${i}">${D(e)}</text>`),l}class z extends Error{constructor(r){super(`SVG Generator: ${r}`),this.name="SVGGeneratorError"}}function Lt(t){if(!t||typeof t!="object")throw new z("Invalid spec: expected an object");const r=t;if(!r.data||typeof r.data!="object")throw new z("Invalid spec: missing or invalid 'data' property");const n=r.data;if(!Array.isArray(n.rows))throw new z("Invalid spec: 'data.rows' must be an array");if(!r.theme||typeof r.theme!="object")throw new z("Invalid spec: missing or invalid 'theme' property");const o=r.theme;if(!o.colors||typeof o.colors!="object")throw new z("Invalid spec: missing or invalid 'theme.colors'");if(!o.typography||typeof o.typography!="object")throw new z("Invalid spec: missing or invalid 'theme.typography'");if(!o.spacing||typeof o.spacing!="object")throw new z("Invalid spec: missing or invalid 'theme.spacing'")}function Mt(t,r={}){Lt(t);const n=t.theme,o=gt(t,r),i=n.spacing.padding,e=Array.isArray(t.columns)?t.columns:[],f=j(e,"left"),l=j(e,"right"),c=V(e,"left"),h=V(e,"right"),a=I.DEFAULT_LABEL_WIDTH+c.reduce((y,b)=>y+(typeof b.width=="number"?b.width:I.DEFAULT_COLUMN_WIDTH),0),s=i+a,p=mt(t,o.forestWidth),g=s+o.forestWidth,u=[];u.push(`<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg"
  width="${o.totalWidth}" height="${o.totalHeight}"
  viewBox="0 0 ${o.totalWidth} ${o.totalHeight}">`);const N=r.backgroundColor??n.colors.background;u.push(`<rect width="100%" height="100%" fill="${N}"/>`),u.push(Et(t,o,n));const $=o.mainY;u.push(st(f,c,i,$,o.headerHeight,n,t.data.labelHeader??"Study",I.DEFAULT_LABEL_WIDTH)),h.length>0&&u.push(st(l,h,g,$,o.headerHeight,n)),u.push(`<line x1="${i}" x2="${o.totalWidth-i}"
    y1="${$+o.headerHeight}" y2="${$+o.headerHeight}"
    stroke="${n.colors.border}" stroke-width="1"/>`);const _=et(t);if(t.data.includeForest&&o.forestWidth>0){const y=o.mainY+o.headerHeight,b=s+p(t.data.nullValue);u.push(ft(b,y,y+o.plotHeight,"dashed",n.colors.muted));const A=Array.isArray(t.annotations)?t.annotations:[];for(const H of A)if(H.type==="reference_line"){const L=s+p(H.x);u.push(ft(L,y,y+o.plotHeight,H.style,H.color??n.colors.accent,H.label))}if(_.forEach((H,L)=>{if(H.type==="data"){const m=y+L*o.rowHeight+o.rowHeight/2;u.push(wt(H.row,m,M=>s+p(M),n,t.data.nullValue,t.data.effects))}}),t.data.overall&&o.showOverallSummary&&typeof t.data.overall.point=="number"&&!Number.isNaN(t.data.overall.point)&&typeof t.data.overall.lower=="number"&&!Number.isNaN(t.data.overall.lower)&&typeof t.data.overall.upper=="number"&&!Number.isNaN(t.data.overall.upper)){const H=y+o.summaryYPosition;u.push(Nt(t.data.overall.point,t.data.overall.lower,t.data.overall.upper,H,p,s,o.forestWidth,n))}u.push(Dt(p,o,n,t.data.axisLabel,s))}const x=o.mainY+o.headerHeight,d=t.data.rows,T=at(d,c),E=at(d,h);return _.forEach((y,b)=>{const A=x+b*o.rowHeight;if(y.type==="group_header")u.push(bt(y.label,y.depth,i,A,o.rowHeight,o.totalWidth-i*2,n));else{const H=y.row,L=y.depth,m=pt(L),M=b%2===1?ut:0,U=Math.max(m,M);U>0&&u.push(`<rect x="${i}" y="${A}"
          width="${o.totalWidth-i*2}" height="${o.rowHeight}"
          fill="${n.colors.muted}" opacity="${U}"/>`),u.push(lt(H,c,i,A,o.rowHeight,n,!0,I.DEFAULT_LABEL_WIDTH,L,T)),h.length>0&&u.push(lt(H,h,g,A,o.rowHeight,n,!1,0,L,E))}u.push(`<line x1="${i}" x2="${o.totalWidth-i}"
      y1="${A+o.rowHeight}" y2="${A+o.rowHeight}"
      stroke="${n.colors.border}" stroke-width="1" opacity="0.5"/>`)}),u.push(_t(t,o,n)),u.push("</svg>"),u.join(`
`)}function Gt(t,r){const n=JSON.parse(t);return Mt(n,r)}globalThis.generateSVG=Gt})();
