(function(){"use strict";function ut(t,e){if(e){const a=[.05,.1,.15,.2,.25,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.2,1.3,1.4,1.5,1.75,2,2.5,3,4,5,6,7,8,10,12,15,20,25,30,40,50,75,100];let f=a[0];for(const s of a)if(s<=t[0])f=s;else break;let c=a[a.length-1];for(let s=a.length-1;s>=0&&a[s]>=t[1];s--)c=a[s];return[f,c]}const n=t[1]-t[0];if(n===0)return t;const o=Math.pow(10,Math.floor(Math.log10(n))),i=n/o;let r;i<=1?r=o*.1:i<=2?r=o*.2:i<=5?r=o*.5:r=o;const l=Math.floor(t[0]/r)*r,h=Math.ceil(t[1]/r)*r;return[l,h]}const tt=.15,ht=.06,dt=.05,ot=.04;function pt(t){return t<=0?0:ot+t*ot}const I={DEFAULT_LABEL_WIDTH:200,DEFAULT_COLUMN_WIDTH:100,AXIS_HEIGHT:32,AXIS_LABEL_HEIGHT:20,BOTTOM_MARGIN:16,MIN_FOREST_WIDTH:200,DEFAULT_WIDTH:800,COLUMN_GAP:16},G={TITLE_HEIGHT:28,SUBTITLE_HEIGHT:20,CAPTION_HEIGHT:16,FOOTNOTE_HEIGHT:14,DEFAULT_FONT_SIZE:14,REM_BASE:16,TEXT_BASELINE_ADJUSTMENT:1/3},N={INDENT_PER_LEVEL:12,TEXT_PADDING:10,WHISKER_HALF_HEIGHT:4,DEFAULT_TICK_COUNT:5},nt={GROUP_HEADER_HEIGHT_MULTIPLIER:1.5,OVERALL_ROW_HEIGHT_MULTIPLIER:1.5};function gt(t,e){var W,P,B,V;const n=t.theme,o=n.spacing.rowHeight,i=n.spacing.padding,r=Array.isArray(t.columns)?t.columns:[],l=j(r,"left"),h=j(r,"right"),f=K(l)||K(h)?n.spacing.headerHeight*nt.GROUP_HEADER_HEIGHT_MULTIPLIER:n.spacing.headerHeight,c=!!((W=t.labels)!=null&&W.title),s=!!((P=t.labels)!=null&&P.subtitle),d=!!((B=t.labels)!=null&&B.caption),y=!!((V=t.labels)!=null&&V.footnote),u=c?G.TITLE_HEIGHT:0,A=s?G.SUBTITLE_HEIGHT:0,m=u+A+(c||s?i:0),E=d?G.CAPTION_HEIGHT:0,$=y?G.FOOTNOTE_HEIGHT:0,T=E+$+(d||y?i:0),w=et(t).length,g=!!t.data.overall,_=w*o+(g?o*nt.OVERALL_ROW_HEIGHT_MULTIPLIER:0),b=Y(r,"left"),H=Y(r,"right"),D=I.DEFAULT_LABEL_WIDTH+b.reduce((v,C)=>v+(typeof C.width=="number"?C.width:I.DEFAULT_COLUMN_WIDTH),0),x=H.reduce((v,C)=>v+(typeof C.width=="number"?C.width:I.DEFAULT_COLUMN_WIDTH),0),M=e.width??I.DEFAULT_WIDTH,U=t.data.includeForest,R=D+x;let k;if(!U)k=0;else if(typeof t.layout.plotWidth=="number")k=t.layout.plotWidth;else{const v=M-R-I.COLUMN_GAP*2-i*2;k=Math.max(v,I.MIN_FOREST_WIDTH)}const F=i*2+R+k+I.COLUMN_GAP*2,S=Math.max(e.width??M,F),X=m+i+f+_+I.AXIS_HEIGHT+I.AXIS_LABEL_HEIGHT+T+I.BOTTOM_MARGIN;return{totalWidth:S,totalHeight:e.height??X,tableWidth:D+x,forestWidth:k,headerHeight:f,rowHeight:o,plotHeight:_,axisHeight:I.AXIS_HEIGHT,nullValue:t.data.nullValue,summaryYPosition:_-o,showOverallSummary:g,headerTextHeight:m,footerTextHeight:T,titleY:i+G.TITLE_HEIGHT-8,subtitleY:i+u+G.SUBTITLE_HEIGHT-4,mainY:m+i,footerY:m+i+f+_+I.AXIS_HEIGHT+I.AXIS_LABEL_HEIGHT+i}}function et(t){var c;const e=t.data.rows,n=Array.isArray(t.data.groups)?t.data.groups:[];if(n.length===0)return e.map(s=>({type:"data",row:s,depth:0}));const o=new Map;for(const s of n)o.set(s.id,s);const i=new Map;for(const s of e){const d=s.groupId??null;i.has(d)||i.set(d,[]),i.get(d).push(s)}const r=new Set;for(const s of i.keys()){if(!s)continue;let d=s;for(;d;)r.add(d),d=(c=o.get(d))==null?void 0:c.parentId}function l(s){return n.filter(d=>(d.parentId??null)===s&&r.has(d.id))}function h(s){if(!s)return 0;const d=o.get(s);return d?d.depth+1:0}const a=[];function f(s){var y;if(s){const u=o.get(s);if(!u)return;const A=((y=i.get(s))==null?void 0:y.length)??0;a.push({type:"group_header",groupId:u.id,label:u.label,depth:u.depth,rowCount:A})}for(const u of l(s))f(u.id);const d=i.get(s)??[];for(const u of d)a.push({type:"data",row:u,depth:h(u.groupId)})}return f(null),a}function rt(t){const e=[];for(const n of t)n.isGroup?e.push(...rt(n.columns)):e.push(n);return e}function Y(t,e){const n=[];for(const o of t)o.position===e&&(o.isGroup?n.push(...rt(o.columns)):n.push(o));return n}function j(t,e){return t.filter(n=>n.position===e)}function K(t){return t.some(e=>e.isGroup)}function it(t,e){return t.isGroup?t.columns.reduce((n,o)=>n+it(o,e),0):typeof t.width=="number"?t.width:e}function O(t){return t.endsWith("rem")?parseFloat(t)*G.REM_BASE:t.endsWith("px")?parseFloat(t):G.DEFAULT_FONT_SIZE}function J(t,e,n){return n==="right"?{textX:t+e-N.TEXT_PADDING,anchor:"end"}:n==="center"?{textX:t+e/2,anchor:"middle"}:{textX:t+N.TEXT_PADDING,anchor:"start"}}function L(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function q(t,e,n,o=0){const i=n*.55,r=e-o*2,l=Math.floor(r/i);return t.length<=l?t:t.slice(0,l-1)+"â€¦"}function Z(t,e){var o;if(t==null||Number.isNaN(t))return(e==null?void 0:e.naText)??"";if(e!=null&&e.percent){const{decimals:i=1,multiply:r=!1,symbol:l=!0}=e.percent,a=(r?t*100:t).toFixed(i);return l?`${a}%`:a}const n=(o=e==null?void 0:e.numeric)==null?void 0:o.decimals;return n!==void 0?t.toFixed(n):Number.isInteger(t)||Math.abs(t-Math.round(t))<1e-4?Math.round(t).toString():t.toFixed(2)}function yt(t,e){const{eventsField:n,nField:o,separator:i="/",showPct:r=!1}=e.events,l=t.metadata[n],h=t.metadata[o];if(l==null||h===void 0||h===null)return e.naText??"";const a=Number(l),f=Number(h);let c=`${a}${i}${f}`;if(r&&f>0){const s=(a/f*100).toFixed(1);c+=` (${s}%)`}return c}function $t(t,e,n){return t==null||Number.isNaN(t)?"":e==null||n===void 0||n===null||Number.isNaN(e)||Number.isNaN(n)?Z(t):`${t.toFixed(2)} (${e.toFixed(2)}, ${n.toFixed(2)})`}function mt(t){return Math.abs(t)<.01?"0":Math.abs(t)>=100?t.toFixed(0):Math.abs(t)>=10?t.toFixed(1):t.toFixed(2)}function xt(t,e){const[n,o]=t,[i,r]=e,l=(r-i)/(o-n),h=a=>i+(a-n)*l;return h.domain=()=>t,h.range=()=>e,h.ticks=a=>{const f=(o-n)/(a-1),c=[];for(let s=0;s<a;s++)c.push(n+f*s);return c},h}function Tt(t,e){const[n,o]=t.map(c=>Math.max(c,.001)),[i,r]=e,l=Math.log10(n),h=Math.log10(o),a=(r-i)/(h-l),f=c=>{const s=Math.log10(Math.max(c,.001));return i+(s-l)*a};return f.domain=()=>[n,o],f.range=()=>e,f.ticks=c=>{const s=[],d=Math.floor(Math.log10(n)),y=Math.ceil(Math.log10(o));for(let u=d;u<=y;u++){const A=Math.pow(10,u);for(const m of[1,2,5]){const E=A*m;E>=n&&E<=o&&s.push(E)}}return s.length>0?s:[n,o]},f}function Et(t,e){const n=t.data.rows,o=t.theme.axis,i=t.data.scale==="log",r=typeof(o==null?void 0:o.rangeMin)=="number",l=typeof(o==null?void 0:o.rangeMax)=="number";let h;if(r&&l)h=[o.rangeMin,o.rangeMax];else{const f=n.flatMap(c=>[c.lower,c.upper]).filter(c=>c!=null&&!Number.isNaN(c)&&Number.isFinite(c));if(f.length===0)h=i?[.1,10]:[0,1];else{const[c,s]=[Math.min(...f),Math.max(...f)],d=s-c||1;h=[r?o.rangeMin:c-d*tt,l?o.rangeMax:s+d*tt]}}const a=ut(h,i);return i?Tt([Math.max(a[0],.01),Math.max(a[1],.02)],[0,e]):xt(a,[0,e])}function _t(t,e,n){var r,l;const o=[],i=n.spacing.padding;if((r=t.labels)!=null&&r.title){const h=O(n.typography.fontSizeLg);o.push(`<text x="${i}" y="${e.titleY}"
      font-family="${n.typography.fontFamily}"
      font-size="${h}px"
      font-weight="${n.typography.fontWeightBold}"
      fill="${n.colors.foreground}">${L(t.labels.title)}</text>`)}if((l=t.labels)!=null&&l.subtitle){const h=O(n.typography.fontSizeBase);o.push(`<text x="${i}" y="${e.subtitleY}"
      font-family="${n.typography.fontFamily}"
      font-size="${h}px"
      fill="${n.colors.secondary}">${L(t.labels.subtitle)}</text>`)}return o.join(`
`)}function bt(t,e,n){var l,h;const o=[],i=n.spacing.padding;let r=e.footerY;if((l=t.labels)!=null&&l.caption){const a=O(n.typography.fontSizeSm);o.push(`<text x="${i}" y="${r}"
      font-family="${n.typography.fontFamily}"
      font-size="${a}px"
      fill="${n.colors.secondary}">${L(t.labels.caption)}</text>`),r+=G.CAPTION_HEIGHT}if((h=t.labels)!=null&&h.footnote){const a=O(n.typography.fontSizeSm);o.push(`<text x="${i}" y="${r}"
      font-family="${n.typography.fontFamily}"
      font-size="${a}px"
      font-style="italic"
      fill="${n.colors.muted}">${L(t.labels.footnote)}</text>`)}return o.join(`
`)}function st(t,e,n,o,i,r,l,h){const a=[],f=O(r.typography.fontSizeSm),c=r.typography.fontWeightMedium,s=r.typography.fontWeightBold,d=K(t),y=I.DEFAULT_COLUMN_WIDTH,u=h??I.DEFAULT_LABEL_WIDTH,A=(m,E)=>m+E/2+f*G.TEXT_BASELINE_ADJUSTMENT;if(d){const m=i/2,E=i/2;let $=n;l&&(a.push(`<text x="${$+N.TEXT_PADDING}" y="${A(o,i)}"
        font-family="${r.typography.fontFamily}"
        font-size="${f}px"
        font-weight="${c}"
        fill="${r.colors.foreground}">${L(l)}</text>`),a.push(`<line x1="${$+u}" x2="${$+u}"
        y1="${o}" y2="${o+i}"
        stroke="${r.colors.border}" stroke-width="1" opacity="0.3"/>`),$+=u);for(const T of t)if(T.isGroup){const p=it(T,y),w=$+p/2;a.push(`<text x="${w}" y="${A(o,m)}"
          font-family="${r.typography.fontFamily}"
          font-size="${f}px"
          font-weight="${s}"
          text-anchor="middle"
          fill="${r.colors.foreground}">${L(T.header)}</text>`),a.push(`<line x1="${$}" x2="${$+p}"
          y1="${o+m}" y2="${o+m}"
          stroke="${r.colors.border}" stroke-width="1" opacity="0.5"/>`),$+=p}else{const p=typeof T.width=="number"?T.width:y,w=T.headerAlign??T.align,{textX:g,anchor:_}=J($,p,w),b=q(T.header,p,f,N.TEXT_PADDING);a.push(`<text x="${g}" y="${A(o,i)}"
          font-family="${r.typography.fontFamily}"
          font-size="${f}px"
          font-weight="${c}"
          text-anchor="${_}"
          fill="${r.colors.foreground}">${L(b)}</text>`),$+=p}$=n+(l?u:0);for(const T of t)if(T.isGroup){for(const p of T.columns)if(!p.isGroup){const w=typeof p.width=="number"?p.width:y,g=p.headerAlign??p.align,{textX:_,anchor:b}=J($,w,g);a.push(`<text x="${_}" y="${A(o+m,E)}"
              font-family="${r.typography.fontFamily}"
              font-size="${f}px"
              font-weight="${c}"
              text-anchor="${b}"
              fill="${r.colors.foreground}">${L(p.header)}</text>`),$+=w}}else{const p=typeof T.width=="number"?T.width:y;$+=p}}else{let m=n;l&&(a.push(`<text x="${m+N.TEXT_PADDING}" y="${A(o,i)}"
        font-family="${r.typography.fontFamily}"
        font-size="${f}px"
        font-weight="${c}"
        fill="${r.colors.foreground}">${L(l)}</text>`),m+=u);for(const E of e){const $=typeof E.width=="number"?E.width:y,T=E.headerAlign??E.align,{textX:p,anchor:w}=J(m,$,T),g=q(E.header,$,f,N.TEXT_PADDING);a.push(`<text x="${p}" y="${A(o,i)}"
        font-family="${r.typography.fontFamily}"
        font-size="${f}px"
        font-weight="${c}"
        text-anchor="${w}"
        fill="${r.colors.foreground}">${L(g)}</text>`),m+=$}}return a.join(`
`)}function Ht(t,e,n,o,i,r,l){const h=[],a=O(l.typography.fontSizeBase),f=o+i/2+a*G.TEXT_BASELINE_ADJUSTMENT,c=e*N.INDENT_PER_LEVEL;return h.push(`<rect x="${n}" y="${o}"
    width="${r}" height="${i}"
    fill="${l.colors.primary}" opacity="${dt}"/>`),h.push(`<text x="${n+N.TEXT_PADDING+c}" y="${f}"
    font-family="${l.typography.fontFamily}"
    font-size="${a}px"
    font-weight="${l.typography.fontWeightBold}"
    fill="${l.colors.foreground}">${L(t)}</text>`),h.join(`
`)}function at(t,e){const n=new Map;for(const o of e)if(o.type==="bar"){let i=0;for(const r of t){const l=r.metadata[o.field];typeof l=="number"&&l>i&&(i=l)}n.set(o.field,i>0?i:1)}return n}function lt(t,e,n,o,i,r,l,h=I.DEFAULT_LABEL_WIDTH,a=0,f){var u,A,m,E,$,T,p,w,g,_,b,H,D;const c=[],s=O(r.typography.fontSizeBase),d=o+i/2+s*G.TEXT_BASELINE_ADJUSTMENT;let y=n;if(l){const x=a*N.INDENT_PER_LEVEL+(((u=t.style)==null?void 0:u.indent)??0)*N.INDENT_PER_LEVEL,M=(A=t.style)!=null&&A.bold?r.typography.fontWeightBold:r.typography.fontWeightNormal,U=(m=t.style)!=null&&m.italic?"italic":"normal",R=h-x-N.TEXT_PADDING*2,k=q(t.label,R,s,0);if(c.push(`<text x="${y+N.TEXT_PADDING+x}" y="${d}"
      font-family="${r.typography.fontFamily}"
      font-size="${s}px"
      font-weight="${M}"
      font-style="${U}"
      fill="${((E=t.style)==null?void 0:E.color)??r.colors.foreground}">${L(k)}</text>`),($=t.style)!=null&&$.badge){const F=String(t.style.badge),S=s*.8,X=4,W=S+X*2,P=t.label.length*s*.55,B=y+N.TEXT_PADDING+x+P+6,v=F.length*S*.6+X*2,C=o+(i-W)/2;c.push(`<rect x="${B}" y="${C}" width="${v}" height="${W}"
        rx="3" fill="${r.colors.primary}" opacity="0.15"/>`),c.push(`<text x="${B+v/2}" y="${C+W/2+S*.35}"
        text-anchor="middle"
        font-family="${r.typography.fontFamily}"
        font-size="${S}px"
        font-weight="500"
        fill="${r.colors.primary}">${L(F)}</text>`)}y+=h}for(const x of e){const M=typeof x.width=="number"?x.width:I.DEFAULT_COLUMN_WIDTH,U=It(t,x),{textX:R,anchor:k}=J(y,M,x.align);if(x.type==="bar"&&typeof t.metadata[x.field]=="number"){const F=t.metadata[x.field],S=f==null?void 0:f.get(x.field),X=((p=(T=x.options)==null?void 0:T.bar)==null?void 0:p.maxValue)??S??100,W=((g=(w=x.options)==null?void 0:w.bar)==null?void 0:g.color)??r.colors.primary,P=r.shapes.pointSize*2,V=M-N.TEXT_PADDING*2-50,v=Math.min(F/X*V,V);c.push(`<rect x="${y+N.TEXT_PADDING}" y="${o+i/2-P/2}"
        width="${Math.max(0,v)}" height="${P}"
        fill="${W}" opacity="0.7" rx="2"/>`);const C=y+M-N.TEXT_PADDING;c.push(`<text x="${C}" y="${d}"
        font-family="${r.typography.fontFamily}"
        font-size="${s}px"
        text-anchor="end"
        fill="${r.colors.foreground}">${Z(F)}</text>`)}else if(x.type==="sparkline"&&Array.isArray(t.metadata[x.field])){let F=t.metadata[x.field];Array.isArray(F[0])&&(F=F[0]);const S=((b=(_=x.options)==null?void 0:_.sparkline)==null?void 0:b.height)??16,X=((D=(H=x.options)==null?void 0:H.sparkline)==null?void 0:D.color)??r.colors.primary,W=N.TEXT_PADDING*2,P=At(F,y+N.TEXT_PADDING,o+i/2-S/2,M-W,S);c.push(`<path d="${P}" fill="none" stroke="${X}" stroke-width="1.5"/>`)}else c.push(`<text x="${R}" y="${d}"
        font-family="${r.typography.fontFamily}"
        font-size="${s}px"
        text-anchor="${k}"
        fill="${r.colors.foreground}">${L(U)}</text>`);y+=M}return c.join(`
`)}function It(t,e){var o,i,r,l,h,a,f,c;if(e.type==="interval")return $t(t.point,t.lower,t.upper);if(e.type==="numeric"){const s=t.metadata[e.field];return typeof s=="number"?Z(s,e.options):((o=e.options)==null?void 0:o.naText)??""}if(e.type==="custom"&&((i=e.options)!=null&&i.events))return yt(t,e.options);if(e.type==="pvalue"){const s=t.metadata[e.field];if(typeof s!="number")return((r=e.options)==null?void 0:r.naText)??"";const d=(h=(l=e.options)==null?void 0:l.pvalue)==null?void 0:h.stars,y=((f=(a=e.options)==null?void 0:a.pvalue)==null?void 0:f.thresholds)??[.05,.01,.001];let u="";return d&&(s<y[2]?u="***":s<y[1]?u="**":s<y[0]&&(u="*")),s<.001?`<0.001${u}`:`${s.toFixed(3)}${u}`}const n=t.metadata[e.field];return n!=null?String(n):((c=e.options)==null?void 0:c.naText)??""}function At(t,e,n,o,i){if(t.length===0)return"";const r=Math.min(...t),h=Math.max(...t)-r||1;return`M${t.map((f,c)=>{const s=e+c/(t.length-1)*o,d=n+i-(f-r)/h*i;return`${s.toFixed(1)},${d.toFixed(1)}`}).join("L")}`}const ct=6;function Q(t,e,n){const o=t.metadata[e];return o!=null&&typeof o=="number"&&!Number.isNaN(o)?o:n}function Nt(t,e){return e<=1?0:-((e-1)*ct)/2+t*ct}function wt(t,e,n,o,i,r=[],l){var T;let h;r.length===0?h=[{point:t.point,lower:t.lower,upper:t.upper,color:null}]:h=r.map(p=>({point:Q(t,p.pointCol,t.point),lower:Q(t,p.lowerCol,t.lower),upper:Q(t,p.upperCol,t.upper),color:p.color??null}));const a=h.filter(p=>p.point!=null&&!Number.isNaN(p.point)&&p.lower!=null&&!Number.isNaN(p.lower)&&p.upper!=null&&!Number.isNaN(p.upper));if(a.length===0)return"";const f=o.shapes.pointSize,c=l?t.metadata[l]:void 0;let s=f;if(c){const p=.5+Math.sqrt(c/100)*1.5;s=Math.min(Math.max(f*p,3),f*2.5)}const d=o.shapes.lineWidth,y=o.colors.intervalLine,u=N.WHISKER_HALF_HEIGHT,A=((T=t.style)==null?void 0:T.type)==="summary",E=o.shapes.summaryHeight/2,$=[];return a.forEach((p,w)=>{const g=e+Nt(w,a.length),_=n(p.lower),b=n(p.upper),H=n(p.point),D=p.color??y,x=p.color??(p.point>i?o.colors.intervalPositive:p.point<i?o.colors.intervalNegative:o.colors.muted);if(A){const M=[`${_},${g}`,`${H},${g-E}`,`${b},${g}`,`${H},${g+E}`].join(" ");$.push(`
        <g class="interval effect-${w} summary">
          <polygon points="${M}"
            fill="${o.colors.summaryFill}" stroke="${o.colors.summaryBorder}" stroke-width="1"/>
        </g>`)}else $.push(`
        <g class="interval effect-${w}">
          <!-- CI line -->
          <line x1="${_}" x2="${b}" y1="${g}" y2="${g}"
            stroke="${D}" stroke-width="${d}"/>
          <!-- Whiskers -->
          <line x1="${_}" x2="${_}" y1="${g-u}" y2="${g+u}"
            stroke="${D}" stroke-width="${d}"/>
          <line x1="${b}" x2="${b}" y1="${g-u}" y2="${g+u}"
            stroke="${D}" stroke-width="${d}"/>
          <!-- Point -->
          <rect x="${H-s}" y="${g-s}"
            width="${s*2}" height="${s*2}" fill="${x}"/>
        </g>`)}),$.join("")}function Dt(t,e,n,o,i,r,l,h){const f=h.shapes.summaryHeight/2,c=i(e),s=i(t),d=i(n),y=r+Math.max(0,Math.min(l,c)),u=r+Math.max(0,Math.min(l,s)),A=r+Math.max(0,Math.min(l,d));return`<polygon points="${[`${y},${o}`,`${u},${o-f}`,`${A},${o}`,`${u},${o+f}`].join(" ")}"
    fill="${h.colors.summaryFill}"
    stroke="${h.colors.summaryBorder}"
    stroke-width="1"/>`}function Lt(t,e,n,o,i){const r=[],l=typeof n.axis.tickCount=="number"?n.axis.tickCount:N.DEFAULT_TICK_COUNT,h=Array.isArray(n.axis.tickValues)?n.axis.tickValues:t.ticks(l),a=O(n.typography.fontSizeSm);r.push(`<line x1="${i}" x2="${i+e.forestWidth}"
    y1="0" y2="0" stroke="${n.colors.border}" stroke-width="1"/>`);for(const f of h){const c=i+t(f);r.push(`<line x1="${c}" x2="${c}" y1="0" y2="4"
      stroke="${n.colors.border}" stroke-width="1"/>`),r.push(`<text x="${c}" y="16" text-anchor="middle"
      font-family="${n.typography.fontFamily}"
      font-size="${a}px"
      fill="${n.colors.secondary}">${mt(f)}</text>`)}return o&&r.push(`<text x="${i+e.forestWidth/2}" y="28"
      text-anchor="middle"
      font-family="${n.typography.fontFamily}"
      font-size="${a}px"
      font-weight="500"
      fill="${n.colors.secondary}">${L(o)}</text>`),`<g transform="translate(0, ${e.mainY+e.headerHeight+e.plotHeight})">${r.join(`
`)}</g>`}function ft(t,e,n,o,i,r){let h=`<line x1="${t}" x2="${t}" y1="${e}" y2="${n}"
    stroke="${i}" stroke-width="1" stroke-dasharray="${o==="dashed"?"6,4":o==="dotted"?"2,2":"none"}"/>`;return r&&(h+=`<text x="${t}" y="${e-4}" text-anchor="middle"
      font-size="10px" fill="${i}">${L(r)}</text>`),h}class z extends Error{constructor(e){super(`SVG Generator: ${e}`),this.name="SVGGeneratorError"}}function Mt(t){if(!t||typeof t!="object")throw new z("Invalid spec: expected an object");const e=t;if(!e.data||typeof e.data!="object")throw new z("Invalid spec: missing or invalid 'data' property");const n=e.data;if(!Array.isArray(n.rows))throw new z("Invalid spec: 'data.rows' must be an array");if(!e.theme||typeof e.theme!="object")throw new z("Invalid spec: missing or invalid 'theme' property");const o=e.theme;if(!o.colors||typeof o.colors!="object")throw new z("Invalid spec: missing or invalid 'theme.colors'");if(!o.typography||typeof o.typography!="object")throw new z("Invalid spec: missing or invalid 'theme.typography'");if(!o.spacing||typeof o.spacing!="object")throw new z("Invalid spec: missing or invalid 'theme.spacing'")}function Gt(t,e={}){Mt(t);const n=t.theme,o=gt(t,e),i=n.spacing.padding,r=Array.isArray(t.columns)?t.columns:[],l=j(r,"left"),h=j(r,"right"),a=Y(r,"left"),f=Y(r,"right"),c=I.DEFAULT_LABEL_WIDTH+a.reduce((g,_)=>g+(typeof _.width=="number"?_.width:I.DEFAULT_COLUMN_WIDTH),0),s=i+c,d=Et(t,o.forestWidth),y=s+o.forestWidth,u=[];u.push(`<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg"
  width="${o.totalWidth}" height="${o.totalHeight}"
  viewBox="0 0 ${o.totalWidth} ${o.totalHeight}">`);const A=e.backgroundColor??n.colors.background;u.push(`<rect width="100%" height="100%" fill="${A}"/>`),u.push(_t(t,o,n));const m=o.mainY;u.push(st(l,a,i,m,o.headerHeight,n,t.data.labelHeader??"Study",I.DEFAULT_LABEL_WIDTH)),f.length>0&&u.push(st(h,f,y,m,o.headerHeight,n)),u.push(`<line x1="${i}" x2="${o.totalWidth-i}"
    y1="${m+o.headerHeight}" y2="${m+o.headerHeight}"
    stroke="${n.colors.border}" stroke-width="1"/>`);const E=et(t);if(t.data.includeForest&&o.forestWidth>0){const g=o.mainY+o.headerHeight,_=s+d(t.data.nullValue);u.push(ft(_,g,g+o.plotHeight,"dashed",n.colors.muted));const b=Array.isArray(t.annotations)?t.annotations:[];for(const H of b)if(H.type==="reference_line"){const D=s+d(H.x);u.push(ft(D,g,g+o.plotHeight,H.style,H.color??n.colors.accent,H.label))}if(E.forEach((H,D)=>{if(H.type==="data"){const x=g+D*o.rowHeight+o.rowHeight/2;u.push(wt(H.row,x,M=>s+d(M),n,t.data.nullValue,t.data.effects,t.data.weightCol))}}),t.data.overall&&o.showOverallSummary&&typeof t.data.overall.point=="number"&&!Number.isNaN(t.data.overall.point)&&typeof t.data.overall.lower=="number"&&!Number.isNaN(t.data.overall.lower)&&typeof t.data.overall.upper=="number"&&!Number.isNaN(t.data.overall.upper)){const H=g+o.summaryYPosition;u.push(Dt(t.data.overall.point,t.data.overall.lower,t.data.overall.upper,H,d,s,o.forestWidth,n))}u.push(Lt(d,o,n,t.data.axisLabel,s))}const $=o.mainY+o.headerHeight,T=t.data.rows,p=at(T,a),w=at(T,f);return E.forEach((g,_)=>{const b=$+_*o.rowHeight;if(g.type==="group_header")u.push(Ht(g.label,g.depth,i,b,o.rowHeight,o.totalWidth-i*2,n));else{const H=g.row,D=g.depth,x=pt(D),M=_%2===1?ht:0,U=Math.max(x,M);U>0&&u.push(`<rect x="${i}" y="${b}"
          width="${o.totalWidth-i*2}" height="${o.rowHeight}"
          fill="${n.colors.muted}" opacity="${U}"/>`),u.push(lt(H,a,i,b,o.rowHeight,n,!0,I.DEFAULT_LABEL_WIDTH,D,p)),f.length>0&&u.push(lt(H,f,y,b,o.rowHeight,n,!1,0,D,w))}u.push(`<line x1="${i}" x2="${o.totalWidth-i}"
      y1="${b+o.rowHeight}" y2="${b+o.rowHeight}"
      stroke="${n.colors.border}" stroke-width="1" opacity="0.5"/>`)}),u.push(bt(t,o,n)),u.push("</svg>"),u.join(`
`)}function Ft(t,e){const n=JSON.parse(t);return Gt(n,e)}globalThis.generateSVG=Ft})();
